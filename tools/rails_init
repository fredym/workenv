#!/bin/bash
set -e

appname=$1
rails="docker run --rm -v $(pwd):/opt/workdir -w /opt/workdir fredym/rails rails"
bundle="docker run --rm -v $(pwd)/$appname:/opt/workdir -w /opt/workdir fredym/rails bundle"

$rails new $appname --skip-bundle

# Adjust the Gemfile
sed -e "s|# gem 'therubyracer'|gem 'therubyracer'|" -i "" $appname/Gemfile
sed -e '16i\
\
# Use HAML for templates\
gem '\''haml-rails'\''\
# Use Bootstrap for resposive layout\
gem '\''bootstrap-sass'\''\
# Use Font Awesome and ionicons for iconography\
gem '\''font-awesome-rails'\''\
gem '\''font-ionicons-rails'\''\
# Use FastClick to make following links in mobile browsers faster\
gem '\''fastclick-rails'\''\
# Use jQuery DataTables to display tabular data\
gem '\''jquery-datatables-rails'\''\
# Use Select2 for smarter select boxes\
gem '\''select2-rails'\''\
' -i "" $appname/Gemfile

$bundle install --local

mv $appname/README.rdoc $appname/README.md
